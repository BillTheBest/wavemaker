<project name="shared-installers" default="" basedir=".">
    <description>
        This script contains shared tasks used by the installers.
    </description>

    <property name="port" value="8094" />

	<condition property="isEnterprise">
        <equals arg1="${project.type}" arg2="enterprise"/>
    </condition>

    <target name="common-installer.generate-dist"
            description="Generate the installer dist; depends on 'installer.wm.root' being set">
        <mkdir dir="${installer.wm.root}"/>
        <mkdir dir="${installer.wm.root}/Support"/>
        <copy todir="${installer.wm.root}/Support">
            <fileset dir="${root.dir}/../Support">
                <exclude name="**/.svn"/>
				<exclude name="**/Batchbuild/**" unless="isEnterprise"/>
            </fileset>
        </copy>

        <mkdir dir="${installer.wm.root}/Samples"/>
        <copy todir="${installer.wm.root}/Samples">
            <fileset dir="${root.dir}/demos">
                <exclude name="**/.svn"/>
            </fileset>
        </copy>

        <copy todir="${installer.wm.root}/launcher">
            <fileset dir="${dist.launcher.dir}"/>
        </copy>

        <copy todir="${installer.wm.root}/studio">
            <fileset dir="${dist.studio.dir}">
				<exclude name="**/RbacPlugin.js" unless="isEnterprise"/>
			</fileset>
        </copy>

        <copy todir="${installer.wm.root}">
            <fileset dir="${build.dir}">
                <include name="VERSION"/>
            </fileset>
        </copy>
    </target>

    <target name="common-installer.clean">
        <delete dir="${installer.wm.root}"/>
    </target>
</project>
